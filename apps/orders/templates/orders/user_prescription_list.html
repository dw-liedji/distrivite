{% extends 'core/base.html' %}
{% load humanize %}
{% load qr_code %}
{% load core %}
{% load partials %}
{% load core %}

{% block title %}
Organizations orders
{% endblock title %}

{% block content %}
{% partialdef list inline=True %}
{% include "core/partials/messages.html" %}
{% include "core/partials/messages.html" %}

<div class="section block">

    <div class="has-text-right my-3">
        <a class="button is-primary" hx-get="{% url 'orders:user_consultation_add' %}" hx-target="#content"
            hx-indicator="#custom-htmx-indicator" hx-swap="innerHTML">Add
            consultation</a>
    </div>
    <div class="table-container">

        <table class="table is-bordered is-striped is-narrow is-hoverable is-fullwidth">
            <thead class="is-selected">
                <tr class="is-selected">
                    <th>#</th>
                    <th style="text-align: center;">Date</th>
                    <th style="text-align: center;">Customer</th>
                    <th style="text-align: center;">Price</th>
                    <th style="text-align: center;">Right Eye (OD)</th>
                    <th style="text-align: center;">Left Eye (OG)</th>
                    <th style="text-align: center;">Informations</th>
                    <th style="text-align: center;">Status</th>
                    <th style="text-align: center;">Payment</th>
                </tr>
            </thead>
            <tbody>
                {% for consultation in orders %}
                <tr>
                    <td style="text-align: center;">{{ consultation.code }}</td>
                    <td style="text-align: center;">{{ consultation.created }}</td>
                    <td style="text-align: center;">
                        <div>
                            <p class="subtitle is-size-4"> {{ consultation.patient }}</p>
                        </div>
                    </td>
                    <td style="text-align: center;">
                        <p class="subtitle">{{ consultation.processing_price.normalize|intcomma }} FCFA</p>

                    </td>
                    <td style="text-align: center;">
                        <div>
                            {{ consultation.render_right|safe }}
                        </div>
                    </td>

                    <td style="text-align: center;">
                        <div>
                            {{ consultation.render_left|safe }}
                        </div>
                    </td>

                    <td style="text-align: center;">
                        <div>
                            {{ consultation.render_additional_info|safe }}
                        </div>
                    </td>

                    <td style="text-align: center;">
                        <span
                            class="tag is-medium {% if consultation.status == 'Finished' %}is-primary{% elif consultation.status == 'Pending' %}is-link{% elif consultation.status == 'Processing' %}is-warning{% endif %}">
                            {{ consultation.status }}
                        </span>
                    </td>

                    <td style="text-align: center;">
                        {% if consultation.is_pay  %}
                        <i class="fa-solid fa-coins fa-2x has-text-success"></i>
                        {% else %}
                        <i class="fa-solid fa-coins fa-2x has-text-danger"></i>
                        {% endif %}
                    </td>

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% include "core/partials/pagination.html" %}
</div>

{% endpartialdef %}

{% endblock content %}