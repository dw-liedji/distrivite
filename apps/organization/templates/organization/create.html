{% extends "core/base.html" %}
{% load crispy_forms_tags %}

{% block title %}Quanta - Create{% endblock title %}

{% block content %}
<div class="section">
    <div class="container">
        <div class="block has-text-centered">
            <p class="title is-size-2">
                Set up your Organization
            </p>

            <p class="subtitle is-size-4">
                Your first steps with digital transformation
            </p>
        </div>

        <main class="block">
            <form class="organization-form" action="" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <fieldset id="organization_form" class="mt-4">
                    <div class="field mt-3">
                        <label class="label" style="display: none;">Organization Name</label>
                        <div class="control">
                            {{ organization_create_form.name|as_crispy_field }}
                        </div>
                        <p class="help">
                            This will be the name of your organization.
                            Your URL will be: <strong>https://cameinet.com/fr/<span id="slug"></span></strong>
                        </p>
                    </div>


                    <div class="field mt-3">
                        <label class="label" style="display: none;">Contact Email</label>
                        <div class="control">
                            {{ organization_create_form.contact_email|as_crispy_field }}
                        </div>
                        <p class="help">
                            Your primary contact email, which we might be in need of if
                            we want to contact you.
                        </p>
                    </div>

                    <!-- Add more fields here as needed -->
                    <div class="field mt-3">
                        <label class="label" style="display: none;">Country</label>
                        <div class="control">
                            {{ organization_create_form.country|as_crispy_field }}
                        </div>
                        <p class="help">
                            Your organization's country.
                        </p>
                    </div>

                    <div class="field mt-3">
                        <label class="label" style="display: none;">City</label>
                        <div class="control">
                            {{ organization_create_form.city|as_crispy_field }}
                        </div>
                        <p class="help">
                            Your organization's city.
                        </p>
                    </div>

                    <div class="field mt-3">
                        <label class="label" style="display: none;">Street Address</label>
                        <div class="control">
                            {{ organization_create_form.street_address|as_crispy_field }}
                        </div>
                        <p class="help">
                            Your organization's street address.
                        </p>
                    </div>

                    <div class="field mt-3">
                        <label class="label" style="display: none;">Contact Number</label>
                        <div class="control">
                            {{ organization_create_form.contact_number|as_crispy_field }}
                        </div>
                        <p class="help">
                            Your organization's contact number.
                        </p>
                    </div>

                    <div class="field mt-3">
                        <label class="label" style="display: none;">Short Name</label>
                        <div class="control">
                            {{ organization_create_form.short_name|as_crispy_field }}
                        </div>
                        <p class="help">
                            A short name for your organization.
                        </p>
                    </div>


                    <div class="field mt-3">
                        <label class="label" style="display: none;">Time zone</label>
                        <div class="control">
                            {{ organization_create_form.timezone|as_crispy_field }}
                        </div>
                        <p class="help">
                            The timezone for your organization.
                        </p>
                    </div>

                    <div class="field mt-3">
                        <label class="label" style="display: none;">Logo</label>
                        <div class="control">
                            {{ organization_create_form.logo|as_crispy_field }}
                        </div>
                        <p class="help">
                            Upload your organization's logo.
                        </p>
                    </div>
                </fieldset>


                <div class="field mt-4">
                    <p class="control">
                        <label class="checkbox">
                            <input type="checkbox">
                            By creating an account, you agree to the
                            <a href="{% url 'core:terms' %}">Terms of Service</a> and
                            <a href="{% url 'core:privacy' %}">Privacy Policy</a>.
                            We'll occasionally send you account-related emails.
                        </label>
                    </p>
                </div>

                <div class="field mt-4">
                    <p class="control">
                        <input class="button is-primary is-large" type="submit" value="Create &raquo;">
                    </p>
                </div>
            </form>
        </main>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"
    integrity="sha256-kvv2M9qFN4PrCNVr2o8d4TwvOfzE7sTjo7WM19Q+O8w=" crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        $("input#id_name").keyup(function () {
            $('#slug').html(slugify(this.value))
        });

        function slugify(str) {
            str = str.replace(/^\s+|\s+$/g, ''); // trim
            str = str.toLowerCase();

            // remove accents, swap ñ for n, etc
            var from = "àáäâèéëêìíïîòóöôùúüûñç·/_,:;";
            var to = "aaaaeeeeiiiioooouuuunc------";
            for (var i = 0, l = from.length; i < l; i++) {
                str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
            }

            str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
                .replace(/\s+/g, '-') // collapse whitespace and replace by -
                .replace(/-+/g, '-'); // collapse dashes
            return str;
        }
    });
</script>
{% endblock %}