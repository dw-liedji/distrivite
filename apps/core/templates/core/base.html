{% load static %}
{% load org_tags %}


<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bulma css  -->
  <link rel="stylesheet" href="{% static 'core/css/quanta.min.css' %}" />
  <link rel="stylesheet" href="{% static 'core/css/sweetalert2bulma.min.css' %}" />
  {% comment %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"> {% endcomment %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-carousel@4.0.4/dist/css/bulma-carousel.min.css" />
  <link href="{% static 'fontawesomefree/css/fontawesome.css' %}" rel="stylesheet" type="text/css">
  <link href="{% static 'fontawesomefree/css/brands.css' %}" rel="stylesheet" type="text/css">
  <link href="{% static 'fontawesomefree/css/solid.css' %}" rel="stylesheet" type="text/css">

  <!-- Htmx  -->
  {% block scripts %}
  {% endblock scripts %}
  <script src="{% static 'core/js/htmx.min.js' %}" defer></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-carousel@4.0.3/dist/css/bulma-carousel.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js"></script>
  <script src="{% static 'core/js/quanta.js' %}"></script>

  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.6.3.min.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.6.3.min.js"></script>

  <script src="{% static 'core/js/sweetalert2.min.js' %}"></script>
  <script>
    $(document).on('click', '#delete', function (e) {
      $(this).parent().parent().remove();
    })
  </script>

  <!-- Load Flatpickr -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <style>
    .fc-timeline-event-harness {
      padding-bottom: 2.5px !important;
    }

    div.fc-timeline-event-harness:last-child {
      padding-bottom: 50px !important;
    }

    .fc-event-title.fc-sticky {
      white-space: pre-wrap;
      /* Allow wrapping on whitespace */
      max-width: 130px;
      /* Set a maximum width to prevent excessive line breaks */
      overflow: hidden;
      /* Hide any text that overflows the maximum width */
      text-overflow: ellipsis;
    }
  </style>

  <!-- Title  -->
  <title>{% block title %}{% endblock %}</title>
</head>

<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>

  <!--Wrapper-->
  <div class="has-text-centered-mobile">

    {% block info %}

    {% endblock info %}

    <section class="section pb-0 mb-0">
      <nav class="navbar is-fixed-top has-shadow px-2" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
          {% if request.organization %}
          {% if request.organization.logo %}
          <a class="navbar-item" data-item="home">
            <img class="image is-48x48 p-0 m-0" src="{{ request.organization.logo.url }}">
          </a>
          {% else %}
          <a class="navbar-item" data-item="site-home">
            <img class="image is-48x48 p-0 m-0" src="{% static 'core/img/logos/color_transparent.png' %}" alt="Image">
          </a>
          {% endif %}
          <a id="aside-menu-toggle-button" class="navbar-item mb-0 my-0 py-0 is-success is-hidden-desktop"
            aria-label="Toggle Sidebar Menu">
            <span class="icon p-0 m-0">
              <i class="fas fa-bars p-0 m-0"></i> <!-- Example: You can use an appropriate icon library -->
            </span>
            <span>Menu</span>
          </a>

          <a class="navbar-item is-hidden-touch is-hidden-desktop-only has-text-weight-bold is-size-3 pr-4 mr-4">
            {{ request.organization.name|slice:":50" }}{% if request.organization.name|length > 50 %}...{% endif %}
          </a>

          <div class="navbar-item">
            {% if request.user.profile.image %}
            <img class="image is-48x48 is-rounded p-0 m-0" alt="User Avatar" src="{{ request.user.profile.image.url }}"
              style="width: 48px; height: 48px; border-radius: 24px;">
            {% else %}
            <img class="image is-48x48 is-rounded p-0 m-0" style="width: 48px; height: 48px; border-radius: 24px;"
              src="{% static 'core/img/profiles/profile1.jpg' %}" alt="Image">
            {% endif %}
            <p class="navbar-item p-0 px-1 m-0 is-hidden-mobile is-hidden-desktop-only">{{ request.user.email  }} |
              {{ request.user.username }}</p>
          </div>
          {% else %}
          <a class="navbar-item" data-item="logo" href="/">
            <img class="image p-0 m-0" src="{% static 'core/img/logos/color_transparent.png' %}" alt="Image">
          </a>
          {% endif %}

          <a id="burger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"
            data-target="navbarBasicExample">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>

        </div>

        <div id="navbarBasicExample" class="navbar-menu">
          <div class="navbar-start">

            {% if not request.organization.name %}
            <a class="navbar-item" data-item="home" href="{% url 'core:index' %}">
              distrivite
            </a>

            {% else %}
            {% include "core/organization_features.html" %}
            {% endif %}

            {% comment %} <a class="navbar-item" data-item="pricing" href="{% url 'subscriptions:pricing' %}">
              Pricing
            </a> {% endcomment %}
          </div>

          <div class="navbar-end">

            {% if not request.user.is_authenticated %}
            <div class="buttons">

              <a href="{% url 'account_signup' %}" class="button navbar-item is-view" data-item="signup">
                <strong>Sign up</strong>
              </a>

              <a href="{% url 'account_login' %}" class="button navbar-item is-light" data-item="login">
                Log in
              </a>
            </div>
            <a class="navbar-item" data-item="locale">
              {% include "core/locale.html" %}
            </a>
            {% else %}
            <a class="navbar-item" data-item="organizations" href="{% url 'users:accounts' %}">Accounts </a>

            {% if user.is_patient %}
            {% else %}
            <a class="navbar-item" data-item="invitations" href="{% url 'users:invitations' %}">Invitations</a>
            {% endif %}

            <a class="navbar-item" data-item="locale">
              {% include "core/locale.html" %}
            </a>
            <a class="navbar-item" data-item="logout" href="{% url 'account_logout' %}">Log out</a>

            {% endif %}

          </div>
        </div>
      </nav>
    </section>

  </div>

  <div id="content-wrapper" class="content-wrapper">

    <div id="content" class="content-main pt-5 px-0 mx-0 pb-0">
      <div class="p-0 m-0">
        {% block content %}
        {% endblock %}
      </div>
    </div>

    <div id="footer" class="footer mx-0 px-0">
      {% block footer %}
      {% include 'core/footer.html' %}
      {% endblock footer %}
    </div>
  </div>

</body>


</html>